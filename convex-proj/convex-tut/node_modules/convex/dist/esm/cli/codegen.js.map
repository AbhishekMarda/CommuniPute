{
  "version": 3,
  "sources": ["../../../src/cli/codegen.ts"],
  "sourcesContent": ["import { Command, Option } from \"commander\";\nimport { readProjectConfig } from \"./lib/config.js\";\nimport chalk from \"chalk\";\nimport { functionsDir, ensureHasConvexDependency } from \"./lib/utils.js\";\nimport { doInitCodegen, doCodegen } from \"./lib/codegen\";\nimport { oneoffContext } from \"./lib/context.js\";\n\nexport const codegen = new Command(\"codegen\")\n  .description(\n    \"Generate TypeScript code in `convex/_generated/` based on the current contents of `convex/`.\"\n  )\n  .option(\n    \"--dry-run\",\n    \"Print out the generated configuration to stdout instead of writing to convex directory\"\n  )\n  .addOption(new Option(\"--debug\").hideHelp())\n  .addOption(\n    new Option(\n      \"--typecheck <mode>\",\n      `Whether to check TypeScript files with \\`tsc --noEmit\\`.`\n    )\n      .choices([\"enable\", \"try\", \"disable\"])\n      .default(\"try\")\n  )\n  .option(\n    \"--init\",\n    \"Also write the default convex/README.md and convex/tsconfig.json, otherwise only written during convex init.\"\n  )\n  .addOption(\n    new Option(\n      \"--commonjs\",\n      \"Generate CommonJS modules (CJS) instead of ECMAScript modules, the default. Bundlers typically take care of this conversion while bundling, so this setting is generally only useful for projects which do not use a bundler, typically Node.js projects. Convex functions can be written with either syntax.\"\n    ).hideHelp()\n  )\n  .action(async options => {\n    const ctx = oneoffContext;\n    const { projectConfig, configPath } = await readProjectConfig(ctx);\n    // This also ensures the current directory is the project root.\n    await ensureHasConvexDependency(ctx, \"codegen\");\n\n    if (options.init) {\n      await doInitCodegen(\n        ctx,\n        functionsDir(configPath, projectConfig),\n        false,\n        options.dryRun,\n        options.debug\n      );\n    }\n\n    if (options.typecheck !== \"disable\") {\n      console.error(\n        chalk.gray(\n          \"Running TypeScript typecheck, add --typecheck=disable to disable.\"\n        )\n      );\n    }\n\n    await doCodegen({\n      ctx,\n      projectConfig,\n      configPath,\n      typeCheckMode: options.typecheck,\n      dryRun: options.dryRun,\n      debug: options.debug,\n      commonjs: options.commonjs,\n    });\n    chalk.green(\"Codegen finished.\");\n  });\n"],
  "mappings": ";AAAA,SAAS,SAAS,cAAc;AAChC,SAAS,yBAAyB;AAClC,OAAO,WAAW;AAClB,SAAS,cAAc,iCAAiC;AACxD,SAAS,eAAe,iBAAiB;AACzC,SAAS,qBAAqB;AAEvB,aAAM,UAAU,IAAI,QAAQ,SAAS,EACzC;AAAA,EACC;AACF,EACC;AAAA,EACC;AAAA,EACA;AACF,EACC,UAAU,IAAI,OAAO,SAAS,EAAE,SAAS,CAAC,EAC1C;AAAA,EACC,IAAI;AAAA,IACF;AAAA,IACA;AAAA,EACF,EACG,QAAQ,CAAC,UAAU,OAAO,SAAS,CAAC,EACpC,QAAQ,KAAK;AAClB,EACC;AAAA,EACC;AAAA,EACA;AACF,EACC;AAAA,EACC,IAAI;AAAA,IACF;AAAA,IACA;AAAA,EACF,EAAE,SAAS;AACb,EACC,OAAO,OAAM,YAAW;AACvB,QAAM,MAAM;AACZ,QAAM,EAAE,eAAe,WAAW,IAAI,MAAM,kBAAkB,GAAG;AAEjE,QAAM,0BAA0B,KAAK,SAAS;AAE9C,MAAI,QAAQ,MAAM;AAChB,UAAM;AAAA,MACJ;AAAA,MACA,aAAa,YAAY,aAAa;AAAA,MACtC;AAAA,MACA,QAAQ;AAAA,MACR,QAAQ;AAAA,IACV;AAAA,EACF;AAEA,MAAI,QAAQ,cAAc,WAAW;AACnC,YAAQ;AAAA,MACN,MAAM;AAAA,QACJ;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAEA,QAAM,UAAU;AAAA,IACd;AAAA,IACA;AAAA,IACA;AAAA,IACA,eAAe,QAAQ;AAAA,IACvB,QAAQ,QAAQ;AAAA,IAChB,OAAO,QAAQ;AAAA,IACf,UAAU,QAAQ;AAAA,EACpB,CAAC;AACD,QAAM,MAAM,mBAAmB;AACjC,CAAC;",
  "names": []
}
