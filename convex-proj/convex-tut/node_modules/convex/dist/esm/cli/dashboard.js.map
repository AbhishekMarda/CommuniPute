{
  "version": 3,
  "sources": ["../../../src/cli/dashboard.ts"],
  "sourcesContent": ["import { Command } from \"commander\";\nimport chalk from \"chalk\";\nimport { readProjectConfig } from \"./lib/config.js\";\nimport open from \"open\";\nimport { Context, oneoffContext } from \"./lib/context.js\";\n\nexport const dashboard = new Command(\"dashboard\")\n  .description(\"Open the dashboard in the browser\")\n  .option(\n    \"--no-open\",\n    \"Don't automatically open the dashboard in the default browser\"\n  )\n  .action(async options => {\n    const ctx = oneoffContext;\n    const loginUrl = await dashboardUrl(ctx);\n\n    if (options.open) {\n      console.log(chalk.gray(`Opening ${loginUrl} in the default browser...`));\n      await open(loginUrl);\n    } else {\n      console.log(loginUrl);\n    }\n  });\n\nexport async function dashboardUrl(ctx: Context): Promise<string> {\n  const { projectConfig } = await readProjectConfig(ctx);\n  const { project, team, prodUrl } = projectConfig;\n  const host = process.env.CONVEX_PROVISION_HOST\n    ? \"http://localhost:3000\"\n    : \"https://dashboard.convex.dev\";\n\n  // in local dev we don't know the deployment name\n  if (process.env.CONVEX_PROVISION_HOST) {\n    return host;\n  }\n\n  const deployment = prodUrl.match(/https?:\\/\\/([^.]*)[.]/)![1];\n  return `${host}/${team}/${project}/${deployment}`;\n}\n"],
  "mappings": ";AAAA,SAAS,eAAe;AACxB,OAAO,WAAW;AAClB,SAAS,yBAAyB;AAClC,OAAO,UAAU;AACjB,SAAkB,qBAAqB;AAEhC,aAAM,YAAY,IAAI,QAAQ,WAAW,EAC7C,YAAY,mCAAmC,EAC/C;AAAA,EACC;AAAA,EACA;AACF,EACC,OAAO,OAAM,YAAW;AACvB,QAAM,MAAM;AACZ,QAAM,WAAW,MAAM,aAAa,GAAG;AAEvC,MAAI,QAAQ,MAAM;AAChB,YAAQ,IAAI,MAAM,KAAK,WAAW,oCAAoC,CAAC;AACvE,UAAM,KAAK,QAAQ;AAAA,EACrB,OAAO;AACL,YAAQ,IAAI,QAAQ;AAAA,EACtB;AACF,CAAC;AAEH,sBAAsB,aAAa,KAA+B;AAChE,QAAM,EAAE,cAAc,IAAI,MAAM,kBAAkB,GAAG;AACrD,QAAM,EAAE,SAAS,MAAM,QAAQ,IAAI;AACnC,QAAM,OAAO,QAAQ,IAAI,wBACrB,0BACA;AAGJ,MAAI,QAAQ,IAAI,uBAAuB;AACrC,WAAO;AAAA,EACT;AAEA,QAAM,aAAa,QAAQ,MAAM,uBAAuB,EAAG;AAC3D,SAAO,GAAG,QAAQ,QAAQ,WAAW;AACvC;",
  "names": []
}
